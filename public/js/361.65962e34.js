"use strict";(self["webpackChunkgood_night_saying"]=self["webpackChunkgood_night_saying"]||[]).push([[361],{4361:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dynamic-details"},[e("div",{staticClass:"dynamic-details-header"},[e("div",{staticClass:"dynamic-details-header-arrow",on:{click:t.JumpRouter}},[e("span",{staticClass:"iconfont icon-arrow-left"})]),e("div",{staticClass:"dynamic-details-header-text"},[t._v("详情")])]),e("div",{staticClass:"dynamic-details-body"},[e("div",{staticClass:"dynamic-body-content"},[e("div",{staticClass:"dynamic-body-header"},[t.item.isCan?t._e():e("div",{staticClass:"body-header-logo"},[e("img",{attrs:{src:t.item.headimage?t.secondUrl[t.index]:t.secondUrl[7]}})]),t.item.isCan?e("div",{staticClass:"body-header-logo hig",style:{backgroundImage:`url(${t.item.headimage})`}}):t._e(),e("div",{staticClass:"body-header-items"},[e("div",{staticClass:"body-header-text"},[t._v(t._s(t.item.username))]),e("div",{staticClass:"body-header-times"},[e("span",[t._v(t._s(t.item.timeline))])])])]),t.item.isCan?t._e():e("div",{staticClass:"dynamic-body-image",on:{click:function(e){return t.showPicture(t.index)}}},[t.mainSrc[t.index]?e("img",{attrs:{src:t.mainSrc[t.index]?t.mainSrc[t.index]:null}}):t._e()]),t.item.isCan?e("div",{staticClass:"dynamic-body-image",on:{click:function(e){return t.showPicture(t.index,t.item.isCan,t.item.mainImage)}}},[t.item.mainImage?e("img",{attrs:{src:t.item.mainImage?t.item.mainImage:null}}):t._e()]):t._e(),t.isShowLay?e("div",{staticClass:"body-header-img-lay"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowHeader,expression:"!isShowHeader"}],staticClass:"body-lay-header"},[e("div",{staticClass:"lay-header-left"},[e("div",{staticClass:"lay-header-arrow",on:{click:t.showElement}},[e("span",{staticClass:"iconfont icon-zuojiantou"})]),e("div",{staticClass:"lay-header-text"},[t._v("图片")])]),e("div",{staticClass:"lay-header-right"},[t.Caning?t._e():e("a",{attrs:{href:t.mainSrc[t.showCt]?t.mainSrc[t.showCt]:null,download:"pircture.jpg"}},[e("span",{staticClass:"iconfont icon-download"})]),t.Caning?e("a",{attrs:{href:t.mImage?t.mImage:null,download:"pircture.jpg"}},[e("span",{staticClass:"iconfont icon-download"})]):t._e()])]),e("div",{staticClass:"body-lay-img",on:{click:function(e){t.isShowHeader=!t.isShowHeader}}},[t.Caning?t._e():e("div",{staticClass:"lay-ig"},[e("img",{attrs:{src:t.mainSrc[t.showCt]?t.mainSrc[t.showCt]:null}})]),t.Caning?e("div",{staticClass:"lay-ig"},[e("img",{attrs:{src:t.mImage?t.mImage:null}})]):t._e()])]):t._e(),e("div",{staticClass:"dynamic-body-words"},[t._v(t._s(t.item.content))]),e("div",{staticClass:"dynamic-body-footer"},[e("div",{staticClass:"body-footer-thumbs"},[t.refImageUrl?t._e():e("img",{ref:"touch",attrs:{src:t.item.comp?t.IGurl[0]:t.IGurl[1]}}),t.refImageUrl?e("img",{ref:"touch",attrs:{src:t.refImageUrl}}):t._e(),e("div",{staticClass:"touch-btn",on:{click:t.praiseAdd}},[t._v(" "+t._s(t.count)+" ")])]),e("div",{staticClass:"body-footer-comment",on:{click:function(e){t.show=!t.show}}},[e("img",{attrs:{src:i(3484)}}),e("div",{staticClass:"comm"},[t._v("评论")]),e("div",[t._v(t._s(t.item.commentcount+t.CN))])]),e("div",{staticClass:"cont-bar"})]),t.isShowUl?e("ul",{staticClass:"comment-area"},t._l(t.commentArr,(function(i,s){return e("li",{key:s,staticClass:"comment-area-item"},[e("div",{staticClass:"user-ig"},[e("div",{staticClass:"uig",style:{backgroundImage:`url(${t.loginImg})`}})]),e("div",{staticClass:"comment-area-context"},[e("div",{staticClass:"comment-area-userName"},[t._v(t._s(t.userN))]),e("div",{staticClass:"comment-area-text"},[t._v(t._s(i.Ctext))]),e("div",{staticClass:"comment-area-foot"},[e("div",{staticClass:"comment-area-time"},[t._v(t._s(i.Ctime))]),t._m(0,!0)])])])})),0):t._e()])]),e("wd-popup",{style:{height:"180px"},attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("div",{staticClass:"dynamic-details-arrangement"},[e("div",{staticClass:"dynamic-arrangement-header"},[e("div",{staticClass:"arrangement-header-left",on:{click:function(e){t.show=!t.show}}},[t._v("取消")]),e("div",{staticClass:"arrangement-header-center"},[t._v("回帖")]),e("div",{staticClass:"arrangement-header-right",on:{click:t.sendMessage}},[t._v("发送")])]),e("div",{staticClass:"dynamic-arrangement-body"},[e("textarea",{ref:"iptText",attrs:{placeholder:"请输入评论内容"}})])])])],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-area-reply"},[e("img",{attrs:{src:i(3484)}}),e("div",{staticClass:"com-rep"},[t._v("回复")])])}],r=(i(7658),i(4692)),o={name:"GoodNightSayingDynamicDetails",props:{item:Object,index:Number,temper:Boolean,userN:String},data(){return{mainSrc:r.C,secondUrl:r.H,count:this.item.pmax,isShowLay:!1,showCt:0,isShowHeader:!1,isPraise:this.item.comp,show:!1,IGurl:[i(1097),i(8877)],commentArr:[],loginImg:null,phoneValue:null,isShowUl:!1,CN:0,refImageUrl:null}},created(){this.show=this.temper,this.rendCommentData()},methods:{JumpRouter(){this.$router.replace({path:"/dynamic"}),this.$emit("changeObjectData",{...this.item,pmax:this.count,comp:this.isPraise,refImageUrl:this.refImageUrl}),this.$emit("changeStorageLength",{CN:this.CN,id:this.item.id+this.userN})},showPicture(t,e,i){this.showCt=t,this.isShowLay=!0,e?(this.Caning=e,this.mImage=i):(this.Caning=null,this.mImage=null)},showElement(){this.isShowLay=!this.isShowLay},praiseAdd(){this.isPraise?(this.count--,this.$refs.touch.src=i(8877),this.isPraise=!1,this.refImageUrl=null,localStorage[this.item.id+this.userN+"praise"]=JSON.stringify({count:this.count,comp:!1})):(this.count++,this.$refs.touch.src=i(1097),this.isPraise=!0,this.refImageUrl=i(1097),localStorage[this.item.id+this.userN+"praise"]=JSON.stringify({count:this.count,comp:!0}))},sendMessage(){if(this.$refs.iptText.value){let t=this.item.id+this.userN,e=this.$refs.iptText.value,i=this.dealCommentTime;for(let s in localStorage){let t=/[0-9]{11}/,e=t.test(s);if(e){let t=JSON.parse(localStorage[s]);if(t.loginRun){this.phoneValue=t.telephone,this.loginImg=t.logoUrl;break}}}if(localStorage[t]){let s=JSON.parse(localStorage[t]);this.commentArr=s,localStorage[t]=JSON.stringify([...s,{Ctext:e,Ctime:i,Cid:t,uName:this.userN}]),this.commentArr.push({Ctext:e,Ctime:i,Cid:t,uName:this.userN})}else localStorage[t]=JSON.stringify([{Ctext:e,Ctime:i,Cid:t,uName:this.userN}]),this.commentArr.push({Ctext:e,Ctime:i,Cid:t,uName:this.userN});this.CN=JSON.parse(localStorage[t]).length,this.show=!this.show,this.isShowUl=!0,this.$refs.iptText.value=""}else this.$toast({msg:"评论内容不能为空",duration:3e3,position:"bottom"})},rendCommentData(){if(localStorage[this.item.id+this.userN]){for(let e in localStorage){let t=/[0-9]{11}/,i=t.test(e);if(i){let t=JSON.parse(localStorage[e]);if(t.loginRun){this.phoneValue=t.telephone,this.loginImg=t.logoUrl;break}}}let t=JSON.parse(localStorage[this.item.id+this.userN]);this.CN=t.length,this.commentArr=t,this.isShowUl=!0}else this.isShowUl=!1}},computed:{dealCommentTime(){let t=new Date,e=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;let s=t.getDate();s=s<10?"0"+s:s;let a=t.getHours();a=a<10?"0"+a:a;let r=t.getMinutes();return r=r<10?"0"+r:r,`${e}-${i}-${s} ${a}:${r}`}}},n=o,l=i(1001),c=(0,l.Z)(n,s,a,!1,null,"0c93f820",null),m=c.exports}}]);
//# sourceMappingURL=361.65962e34.js.map